@using Resturant_RES_MVC_ITI_PRJ.Areas.Client.Models;

@{
    List<Customer> CU = ViewBag.MostCustomersOrdered;
    List<Customer> LC = ViewBag.LeastCustomersSignUps;
}

<div id="kt_app_toolbar_container" class="app-container container p-3 d-flex flex-stack">
    <div class="page-title d-flex flex-column justify-content-center flex-wrap me-3">
        <h1 class="page-heading d-flex text-dark fw-bold fs-3 flex-column justify-content-center my-0">Customer Analysis</h1>
        <ul class="breadcrumb breadcrumb-separatorless fw-semibold fs-7 my-0 pt-1">
            <li class="breadcrumb-item text-muted">
                <a asp-action="Index" asp-controller="Home" asp-area="" class="text-muted text-hover-primary">Home</a>
            </li>
            <li class="breadcrumb-item">
                <span class="bullet bg-gray-400 w-5px h-2px"></span>
            </li>
            <li class="breadcrumb-item text-muted">Customer Analysis</li>
        </ul>
    </div>
</div>

<div id="kt_app_content" class="app-content container-fluid m-auto flex-column-fluid m-5 p-5">
    <div class="d-flex align-items-center justify-content-evenly mx-3">
        <div class="card text-bg-warning mb-3" style="max-width: 18rem;height:150px;">
            <div class="card-body">
                <h5 class="card-title"> Number of customers who have placed an order today:</h5>
                <p class="card-text fs-1 text-danger fw-bold">@ViewBag.NoCustomerOrdered</p>
            </div>
        </div>

        <div class="card text-bg-danger mb-3" style="max-width: 18rem;height:150px;">
            <div class="card-body">
                <h5 class="card-title"> Number of customers who Registered: </h5>
                <p class="card-text fs-1 text-light fw-bold"> @ViewBag.NoOfRegisteredCustomers</p>
            </div>
        </div>
    </div>

    <hr />

    <p class="fw-bold fs-4">Most Customers Ordered <span class="text-danger">@CU.Count</span></p>
    <table class="table table-info table-striped" id="TableData01">
        <thead>
            <tr class="align-middle text-center">
                <th class="col-sm-2 text-center">Customer Email</td>
                <th class="col-sm-2 text-center">Customer Name</td>
                <th class="col-sm-2 text-center">Customer Phone</td>
                <th class="col-sm-2 text-center">Customer City</td>

            </tr>
        </thead>
        <tbody>
            @foreach (var customer in CU)
            {
                <tr class="align-middle text-center">
                    <td class="col-sm-2">@customer.CustEmail</td>
                    <td class="col-sm-2">@customer.FirstName @customer.LastName</td>
                    <td class="col-sm-2">@customer.CustPhone</td>
                    <td class="col-sm-2">@customer.CustAddressCity</td>
                </tr>
            }
        </tbody>
    </table>

    <hr />

    <p class="fw-bold fs-4">Last Customers Signed Ups</p>
    <table class="table table-info table-striped" id="TableData02">
        <thead>
            <tr>
                <th class="col-sm-2 text-center">Customer Email</td>
                <th class="col-sm-2 text-center">Customer Name</td>
                <th class="col-sm-2 text-center">Customer Phone</td>
                <th class="col-sm-2 text-center">Customer City</td>
            </tr>
        </thead>

        <tbody>
            @foreach (var customer in LC)
            {
                <tr class="align-middle text-center">
                    <td class="col-sm-2">@customer.CustEmail</td>
                    <td class="col-sm-2">@customer.FirstName @customer.LastName</td>
                    <td class="col-sm-2">@customer.CustPhone</td>
                    <td class="col-sm-2">@customer.CustAddressCity</td>
                </tr>
            }
        </tbody>
    </table>
</div>



<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

<script>
    $(document).ready(function () {
        $('#TableData01').DataTable();
    });

    $(document).ready(function () {
        $('#TableData02').DataTable();
    });
</script>
